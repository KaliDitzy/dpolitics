
scripted_diplomatic_actions = {
	declare_independence = { # will be used in most localizations
	
		# root is the initiator of action and this is the target country
		allowed = { #if action is valid
		}
		visible = { #if action is visible on gui
			ROOT = {
				is_subject_of = PREV
			}
		}
		selectable = { #if action is selectable on gui
		}

		requires_acceptance = yes # if true the action will require acceptance of target country
		can_be_accepted = {
			always = yes
		}
		can_be_rejected = {
			always = yes
		}


		cost = 150 # pp cost, can be zero

		icon = 1 # icon frame to use in notification

       #for effects/triggers/variables, root is the sender and this is receiver

		# runs when the action is sent
		on_sent_effect = {
			set_autonomy = {
				target = ROOT
				autonomy_state = autonomy_free
			}
			ROOT = {
				leave_faction = yes
			}
		}

		# runs when the action is properly sent and accepted
		complete_effect = {
			add_to_faction = ROOT
		}

		# runs when the action is properly sent and rejected
		reject_effect = {
			create_wargoal = {
				target = ROOT
				type = puppet_wargoal_focus
			}
		}

		can_be_sent = { # send button will be disabled if no
			always = yes
		}
		send_description = declare_independence_send_desc # if there is no scripted gui, this desc will be used in send yes/no pop up
		accept_title = declare_independence_accept #can be overridden to customize accepted/rejected pop ups for the sender
		accept_description = declare_independence_accept_desc
		reject_title = declare_independence_reject
		reject_description = declare_independence_reject_desc

		ai_acceptance = {
			base_reluctance = {
				base = -20
			}
		}

		# ai_will_do to decide if AI should send this action or not
		ai_desire = {
			base = -100
		}
	}

	conform_government = { # will be used in most localizations
	
		# root is the initiator of action and this is the target country
		allowed = { #if action is valid
			always = yes
		}
		visible = { #if action is visible on gui
			is_subject_of = ROOT
		}
		selectable = { #if action is selectable on gui
			always = yes
		}

		requires_acceptance = no # if true the action will require acceptance of target country
		cost = 150 # pp cost, can be zero

		icon = 1 # icon frame to use in notification

       #for effects/triggers/variables, root is the sender and this is receiver

		# runs when the action is sent
		on_sent_effect = {
		}

		# runs when the action is properly sent and accepted
		complete_effect = {
			if = {
				limit = {
					ROOT = { has_idea = reform_dop_monarchy }
				}
				add_ideas = reform_dop_monarchy
				hidden_effect = {
					remove_ideas = {
						reform_dop_oligarchy
						reform_dop_minarchy
						reform_dop_anarchy
					}
				}
			}
			else_if = {
				limit = {
					ROOT = { has_idea = reform_dop_oligarchy }
				}
				add_ideas = reform_dop_oligarchy
				hidden_effect = {
					remove_ideas = {
						reform_dop_monarchy
						reform_dop_minarchy
						reform_dop_anarchy
					}
				}
			}
			else_if = {
				limit = {
					ROOT = { has_idea = reform_dop_minarchy }
				}
				add_ideas = reform_dop_minarchy
				hidden_effect = {
					remove_ideas = {
						reform_dop_monarchy
						reform_dop_oligarchy
						reform_dop_anarchy
					}
				}
			}
			else_if = {
				limit = {
					ROOT = { has_idea = reform_dop_anarchy }
				}
				add_ideas = reform_dop_anarchy
				hidden_effect = {
					remove_ideas = {
						reform_dop_monarchy
						reform_dop_oligarchy
						reform_dop_minarchy
					}
				}
			}
			
			if = {
				limit = {
					ROOT = { has_idea = reform_dm_autocracy }
				}
				add_ideas = reform_dm_autocracy
				hidden_effect = {
					remove_ideas = {
						reform_dm_technocracy
						reform_dm_corporatism
						reform_dm_representative_democracy
						reform_dm_direct_democracy
						reform_dm_free_association
					}
				}
			}
			else_if = {
				limit = {
					ROOT = { has_idea = reform_dm_technocracy }
				}
				add_ideas = reform_dm_technocracy
				hidden_effect = {
					remove_ideas = {
						reform_dm_autocracy
						reform_dm_corporatism
						reform_dm_representative_democracy
						reform_dm_direct_democracy
						reform_dm_free_association
					}
				}
			}
			else_if = {
				limit = {
					ROOT = { has_idea = reform_dm_corporatism }
				}
				add_ideas = reform_dm_corporatism
				hidden_effect = {
					remove_ideas = {
						reform_dm_autocracy
						reform_dm_technocracy
						reform_dm_representative_democracy
						reform_dm_direct_democracy
						reform_dm_free_association
					}
				}
			}
			else_if = {
				limit = {
					ROOT = { has_idea = reform_dm_representative_democracy }
				}
				add_ideas = reform_dm_representative_democracy
				hidden_effect = {
					remove_ideas = {
						reform_dm_autocracy
						reform_dm_technocracy
						reform_dm_corporatism
						reform_dm_direct_democracy
						reform_dm_free_association
					}
				}
			}
			else_if = {
				limit = {
					ROOT = { has_idea = reform_dm_direct_democracy }
				}
				add_ideas = reform_dm_direct_democracy
				hidden_effect = {
					remove_ideas = {
						reform_dm_autocracy
						reform_dm_technocracy
						reform_dm_corporatism
						reform_dm_representative_democracy
						reform_dm_free_association
					}
				}
			}
			else_if = {
				limit = {
					ROOT = { has_idea = reform_dm_free_association }
				}
				add_ideas = reform_dm_free_association
				hidden_effect = {
					remove_ideas = {
						reform_dm_autocracy
						reform_dm_technocracy
						reform_dm_corporatism
						reform_dm_representative_democracy
						reform_dm_direct_democracy
					}
				}
			}

			if = {
				limit = {
					ROOT = { has_idea = reform_pao_feudal_structure }
				}
				add_ideas = reform_pao_feudal_structure
				hidden_effect = {
					remove_ideas = {
						reform_pao_private_ownership
						reform_pao_private_property_abolished
					}
				}
			}
			else_if = {
				limit = {
					ROOT = { has_idea = reform_pao_private_ownership }
				}
				add_ideas = reform_pao_private_ownership
				hidden_effect = {
					remove_ideas = {
						reform_pao_feudal_structure
						reform_pao_private_property_abolished
					}
				}
			}
			else_if = {
				limit = {
					ROOT = { has_idea = reform_pao_private_property_abolished }
				}
				add_ideas = reform_pao_private_property_abolished
				hidden_effect = {
					remove_ideas = {
						reform_pao_feudal_structure
						reform_pao_private_ownership
					}
				}
			}

			set_temp_variable = { tmp = 10 } custom_effect_tooltip = dissent_change add_to_variable = { dissent_base = tmp } recalculate_dissent = yes
			THIS = { recalculate_cosmetic_tag = yes }
		}

		# runs when the action is properly sent and rejected
		reject_effect = {
		}

		can_be_sent = { # send button will be disabled if no
			always = yes
		}
		send_description = conform_government_send_desc # if there is no scripted gui, this desc will be used in send yes/no pop up
		accept_title = conform_government_accept #can be overridden to customize accepted/rejected pop ups for the sender
		accept_description = conform_government_accept_desc

		# ai_will_do to decide if AI should send this action or not
		ai_desire = {
			base = -1
			modifier = {
				NOT = { check_variable = { ROOT.regime_id = THIS.regime_id } }
				add = 1000
			}
		}
	}
}
